const generateBtn = document.getElementById('generateBtn');
const qrcodeContainer = document.getElementById('qrcode');
const downloadLink = document.getElementById('downloadLink');

generateBtn.addEventListener('click', () => {
    const networkName = document.getElementById('networkName').value;
    const password = document.getElementById('password').value;

    if (networkName && password) {
        const wifiInfo = `WIFI:T:WPA;S:${networkName};P:${password};;`;
        qrcodeContainer.innerHTML = '';
        const qrcode = new QRCode(qrcodeContainer, {
            text: wifiInfo,
            width: 200,
            height: 200
        });

        const qrSvg = qrcodeContainer.querySelector('svg');
        qrSvg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        const svgData = new XMLSerializer().serializeToString(qrSvg);
        const svgBlob = new Blob([svgData], { type: 'image/svg+xml' });
        const svgUrl = URL.createObjectURL(svgBlob);

        const qrPng = qrSvg.toDataURL('image/png');
        const downloadPngLink = document.createElement('a');
        downloadPngLink.href = qrPng;
        downloadPngLink.download = 'qrcode.png';
        downloadPngLink.textContent = 'Táº£i QR Code (PNG)';
        
        downloadLink.href = svgUrl;
        downloadLink.style.display = 'inline-block';
    }
});


function showPassword() {
    const passwordInput = document.getElementById('password');
    const showPasswordBtn = document.getElementById('showPasswordBtn');
    const eyeIcon = showPasswordBtn.querySelector('i');

    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
    }
}

