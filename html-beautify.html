<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>HTML Beautifier &amp; Formatter</title>
    <link href='/images/favicon.ico' rel='icon' type='image/x-icon'>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <script src="/js/jquery.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <style type="text/css">
        #fromeditor,#toeditor{height:275px;border:1px solid #DDD;border-radius:4px;border-bottom-right-radius:0;margin-top:5px}
        .btn-reset {
    color: #eee;
    background-color: #dd6666;
}
        .btn-copy {
    color: #eee;
    background-color: #337ab7;
}
        .btn-reset:hover, .btn-copy:hover{
    background-color: #333;
}
    </style>
</head>

<body>
    <div class="container">
        <h3><b>Format HTML code</b></h3>
        <hr>
        <div class="row">
            <div id="fromeditor"></div>
            <div class="row">
                <div class="col-md-3"><button id="convert" class="btn btn-primary" style="margin:10px 0">Beautifier</button> <button id="reset" class="btn btn-reset" style="margin:10px 0">Reset</button></div>
            </div>
            <div id="toeditor"></div>
            <!-- Thêm nút "Copy" -->
            <div class="col-md-3"><button id="copy" class="btn btn-copy" style="margin: 10px 0;">Copy</button></div>

            <hr>
        </div>
    </div>
    <script>
        var _0x30f6=['getValue','edit','fromeditor','getSession','ace/mode/html','setShowPrintMargin','ready','click','function'];(function(_0x423131,_0x3d531f){var _0x13a2f4=function(_0x1cb22f){while(--_0x1cb22f){_0x423131['push'](_0x423131['shift']());}};_0x13a2f4(++_0x3d531f);}(_0x30f6,0xcc));var _0x4703=function(_0x54c31e,_0x361193){_0x54c31e=_0x54c31e-0x0;var _0x415df6=_0x30f6[_0x54c31e];return _0x415df6;};$(document)[_0x4703('0x0')](function(){$(document)['on'](_0x4703('0x1'),'#convert',function(){if(typeof html_beautify===_0x4703('0x2')){var _0x191bee=_0x212384[_0x4703('0x3')]();var _0x110620=html_beautify(_0x191bee,'');_0x5a9e4a['setValue'](_0x110620);}});var _0x212384=ace[_0x4703('0x4')](_0x4703('0x5'));_0x212384[_0x4703('0x6')]()['setMode'](_0x4703('0x7'));_0x212384[_0x4703('0x8')](![]);var _0x5a9e4a=ace[_0x4703('0x4')]('toeditor');_0x5a9e4a['getSession']()['setMode'](_0x4703('0x7'));_0x5a9e4a[_0x4703('0x8')](![]);});
    </script>
    <script>
        // Xử lý sự kiện khi nút Reset được click
        $(document).on('click', '#reset', function () {
            // Đặt lại nội dung của trình soạn thảo #fromeditor và #toeditor về trạng thái mặc định (rỗng)
            editorFrom.getSession().setValue('');
            editorTo.getSession().setValue('');
        });
        
        var editorFrom = null; // Biến cho trình soạn thảo #fromeditor
        var editorTo = null;   // Biến cho trình soạn thảo #toeditor
        
        $(document).ready(function () {
            // Tạo biến để lưu trữ các trình soạn thảo
            editorFrom = ace.edit('fromeditor');
            editorFrom.getSession().setMode('ace/mode/html');
            editorFrom.setShowPrintMargin(false);
        
            editorTo = ace.edit('toeditor');
            editorTo.getSession().setMode('ace/mode/html');
            editorTo.setShowPrintMargin(false);
            
            // Các phần còn lại của mã JavaScript hiện có (không thay đổi)
        });
        
        // Xử lý sự kiện khi nút Copy được click
        $(document).on('click', '#copy', function () {
            var editorToContent = editorTo.getValue(); // Lấy nội dung từ trình soạn thảo #toeditor
            copyToClipboard(editorToContent); // Gọi hàm sao chép nội dung vào clipboard
        });
        
        // Hàm để sao chép nội dung vào clipboard
        function copyToClipboard(text) {
            var tempInput = document.createElement('textarea');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            alert('Nội dung đã được sao chép vào clipboard.');
        }
    </script>
    <script src="/js/ace.js"></script>
    <script src="/js/html_beautify.js"></script>
</body>

</html>
